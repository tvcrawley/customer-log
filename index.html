<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Customer Log</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.4.1/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/2.1.0/angularfire.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/3.6.5/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyB96vp1Xs-IGhp4d3aHlvyFR1aJZXKfdEw",
            authDomain: "customer-log-313dd.firebaseapp.com",
            databaseURL: "https://customer-log-313dd.firebaseio.com",
            storageBucket: "customer-log-313dd.appspot.com",
            messagingSenderId: "124465699915"
        };
        firebase.initializeApp(config);
    </script>
    <script src="app.js">
    </script>
</head>

<body ng-app="customerLog">
    <div ng-controller="CustomerLogController as vm">
        <h1>Customer Log</h1>

        <h3 ng-hide="newCustomerForm">
            <label> Add a Customer<input type="checkbox" ng-model="newCustomerForm" ng-init="newCustomerForm"></label>
        </h3>

        <form ng-submit="vm.addCustomer(); newCustomerForm=false" ng-show="newCustomerForm">
            <label>First Name: </label>
            <input type="text" ng-model="vm.newCustomer.name.first_name">
            <label>Last Name</label>
            <input type="text" ng-model="vm.newCustomer.name.last_name">
            <label>Email</label>
            <input type="text" ng-model="vm.newCustomer.email">
            <label>Phone Number</label>
            <input type="text" ng-model="vm.newCustomer.phone_number">
            <label>Address</label>
            <label>Street</label>
            <input type="text" ng-model="vm.newCustomer.address.street">
            <label>City</label>
            <input type="text" ng-model="vm.newCustomer.address.city">
            <label>State</label>
            <input type="text" ng-model="vm.newCustomer.address.state">
            <label>Zip</label>
            <input type="text" ng-model="vm.newCustomer.address.zip">
            <button type="submit">Add Customer</button>
        </form>

        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone Number</th>
                    <th>Address</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody ng-repeat="customer in vm.customers">
                <tr>

                    <td>
                        <p ng-hide="customerEdit">
                            {{customer.name.first_name}} {{customer.name.last_name}}
                        </p>
                        <input type="text" ng-show="customerEdit" ng-model="customer.name.first_name" placeholder="{{customer.name.first_name}}">
                        <input type="text" ng-show="customerEdit" ng-model="customer.name.last_name" placeholder="{{customer.name.last_name}}">
                    </td>

                    <td>
                        <p ng-hide="customerEdit">{{customer.email}}</p>
                        <input type="text" ng-show="customerEdit" ng-model="customer.email" placeholder="{{customer.email}}">
                    </td>

                    <td>
                        <p ng-hide="customerEdit">{{customer.phone_number}}</p>
                        <input type="text" ng-show="customerEdit" ng-model="customer.phone_number" placeholder="{{customer.phone_number}}">
                    </td>

                    <td>
                        <p ng-hide="customerEdit">{{customer.address.street}}, {{customer.address.city}}, {{customer.address.state}} {{customer.address.zip}}</p>
                        <input type="text" ng-show="customerEdit" ng-model="customer.address.street" placeholder="{{customer.address.street}}">
                        <input type="text" ng-show="customerEdit" ng-model="customer.address.city" placeholder="{{customer.address.city}}">
                        <input type="text" ng-show="customerEdit" ng-model="customer.address.state" placeholder="{{customer.address.state}}">
                        <input type="text" ng-show="customerEdit" ng-model="customer.address.zip" placeholder="{{customer.address.zip}}">
                    </td>

                    <td ng-hide="customerEdit">
                        <input type="checkbox" ng-model="customerEdit" ng-init="customerEdit">
                    </td>

                    <td ng-show="customerEdit">
                        <button ng-click="vm.update(customer); customerEdit=false">Save</button>
                    </td>

                    <td>
                        <button ng-click="vm.delete(customer)"></button>
                    </td>
                </tr>
            </tbody>
        </table>


    </div>
</body>

</html>
